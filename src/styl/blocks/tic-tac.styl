cell_count = 9
cell_size = 60px

.tic-tac
	padding 20px
	&__grid
		width cell_size*3
		display flex
		flex-wrap wrap
		position relative
	&__game-over
		size 100% calc(100% + 30px)
		font-size 24px
		font-weight 700
		position absolute
		top 0
		left 0
		display flex
		align-items flex-end
		justify-content center
		opacity 0
		visibility hidden
		z-index -1
	&__cell
		size cell_size
		color #f00
		font-size 24px
		font-weight 700
		text-align center
		border 2px solid #434343
		border-left none
		border-top none
		background-color #fff
		position relative
		display block
		cursor pointer
		&:nth-of-type(3n)
			border-right none
		&:nth-of-type(9n),
		&:nth-of-type(9n-1),
		&:nth-of-type(9n-2)
			border-bottom none
		&:before,
		&:after
			display none
			border 2px solid #f00
		&:hover
			&:before
			&:after
				display block
				border-color #f3919c
		&--tic
			&:before,
			&:after
				content ""
				width 20px
				position absolute
				top 50%
				left 50%
			&:before
				transform translate(-50%, -50%) rotate(45deg)
			&:after
				transform translate(-50%, -50%) rotate(-45deg)
		&--tac
			&:before
				content ""
				size 20px
				border-width 4px
				border-radius 50%
				position absolute
				top 50%
				left 50%
				transform translate(-50%, -50%)

		for i in (0..8)
			&--{i}
				order i

		for turn in (1..8)
			&--turn-{turn}
				display none
	&__input
		display none
		for turn in (0..8)
			for i in (0..8)
				&--turn-{turn}&--{i}:checked
					& ~ .tic-tac__cell--{i}.tic-tac__cell--turn-{turn} // checked cell
						cursor default
						&:before,
						&:after
							border-color #f00
							display block
					& ~ .tic-tac__cell--{i}:not(.tic-tac__cell--turn-{turn})
						display none // hide same cells
					& ~ .tic-tac__cell--turn-{turn}:not(.tic-tac__cell--{i})
						display none // hide same turns
					& ~ .tic-tac__cell--turn-{turn+1}
						display block // show next turn

// draw
.tic-tac__input--0:checked ~ .tic-tac__input--1:checked ~ .tic-tac__input--2:checked ~ .tic-tac__input--3:checked ~ .tic-tac__input--4:checked ~ .tic-tac__input--5:checked ~ .tic-tac__input--6:checked ~ .tic-tac__input--7:checked ~ .tic-tac__input--8:checked
	& ~ .tic-tac__game-over--draw
		opacity 1
		visibility visible
		z-index 1

// win
win_combos = {
	hor_1: (0 1 2),
	hor_2: (3 4 5),
	hor_3: (6 7 8),
	vert_1: (0 3 6),
	vert_2: (1 4 7),
	vert_3: (2 5 8),
	cross_1: (0 4 8),
	cross_2: (2 4 6)
}
for _, combos in win_combos
	.tic-tac__input--tic.tic-tac__input--{combos[0]}:checked ~ .tic-tac__input--tic.tic-tac__input--{combos[1]}:checked ~ .tic-tac__input--tic.tic-tac__input--{combos[2]}:checked,
	.tic-tac__input--tac.tic-tac__input--{combos[0]}:checked ~ .tic-tac__input--tac.tic-tac__input--{combos[1]}:checked ~ .tic-tac__input--tac.tic-tac__input--{combos[2]}:checked
		& ~ .tic-tac__cell
			&:before
			&:after
				border-color #cbcbcb
			&--{combos[0]},
			&--{combos[1]},
			&--{combos[2]}
				&:before
				&:after
					border-color #f00
		& ~ .tic-tac__game-over
			opacity 1
			visibility visible
			z-index 1
			&--draw
				opacity 0
				visibility hidden
				z-index -1